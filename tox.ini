[tox]
min_version = 4.0
env_list = py38,py39,py310,py311,py312


[testenv]
description = Run all tests
deps =
    .[dev]
commands =
    pytest tests/ {posargs}


[testenv:test-unit]
description = Run unit tests
deps =
    .[dev]
commands =
    python -m pytest tests/unit {posargs}


[testenv:test-integration]
description = Run integration tests
deps =
    .[dev]
commands =
    python -m pytest tests/integration {posargs}


[testenv:test-e2e]
description = Run end-to-end tests
deps =
    .[dev]
commands =
    python -m pytest tests/e2e {posargs}


[testenv:quality]
description = Run all quality checks
deps =
    .[dev]
commands =
    ruff check src tests


[testenv:style]
description = Run style checks and fixes
deps =
    .[dev]
commands =
    ruff format src tests


[testenv:types]
description = Run type checks
deps =
    .[dev]
commands =
    mypy --check-untyped-defs


[testenv:build]
description = Build the project
deps =
    setuptools
    wheel
commands =
    python setup.py sdist bdist_wheel


[testenv:clean]
description = Clean up build, dist, and cache files
skip_install = true
deps =
commands =
    rm -rf build
    rm -rf dist
    rm -rf *.egg-info
    find . -type f -name "*.pyc" -delete
    find . -type d -name "__pycache__" -exec rm -r {} +
    rm -rf .mypy_cache
    rm -rf .pytest_cache
    rm -rf .tox